var wppaJsSphericVersion="8.0.00.017";function wppaDoSphericPan(t,n){var c=jQuery;n&&(wppaSphericData[t]=n);var s=f(t,s);if(!s.initialized&&!s.abort&&(!s.isLightbox||wppaOvlOpen)){if(!s.isLightbox&&!wppaIsElementInViewport(c("#wppa-pan-div-"+t)))return setTimeout(function(){wppaDoSphericPan(t)},1e3),void f(t,{vtime:b()});s.wppaRenderer&&(s.wppaRenderer.state.reset(),s.wppaSphere.dispose(),s.wppaSphereMaterial.dispose(),s.texture.dispose()),s.isLightbox&&wppaOvlOpen&&(c("#wppa-ovl-spin").show(),c("#wppa-overlay-ic").html("")),s.manCtrl=!1,s.butDown=!1,s.lon=180,s.lat=0,s.dFov=0,s.abort=!1,s.aspect=2,s.div=c("#wppa-pan-div-"+t),s.left=c("#wppa-pctl-left-"+t),s.right=c("#wppa-pctl-right-"+t),s.up=c("#wppa-pctl-up-"+t),s.down=c("#wppa-pctl-down-"+t),s.zoomin=c("#wppa-pctl-zoomin-"+t),s.zoomout=c("#wppa-pctl-zoomout-"+t),s.prev=c("#wppa-pctl-prev-"+t),s.next=c("#wppa-pctl-next-"+t),s.pause=!1,s.mFakt=wppaIsMobile?"2":"1",s.time=0,s.isLightbox&&(wppaGlobalOvlPanoramaId++,s.uId=wppaGlobalOvlPanoramaId),c(s.div).html(""),s.wppaRenderer||(s.wppaRenderer=new THREE.WebGLRenderer),s.wppaRenderer.setSize(s.width,s.height),c(s.div).append(s.wppaRenderer.domElement),s.wppaScene=new THREE.Scene,s.wppaSphere=new THREE.SphereGeometry(100,100,40),s.wppaSphere.applyMatrix4((new THREE.Matrix4).makeScale(-1,1,1)),s.texture=(new THREE.TextureLoader).load(s.url),s.wppaSphereMaterial=new THREE.MeshBasicMaterial({map:s.texture}),s.wppaSphereMesh=new THREE.Mesh(s.wppaSphere,s.wppaSphereMaterial),s.wppaScene.add(s.wppaSphereMesh),s.right.on("touchstart",function(n){u(t)}),s.right.on("touchend",function(n){v(t)}),s.left.on("touchstart",function(n){l(t)}),s.left.on("touchend",function(n){v(t)}),s.up.on("touchstart",function(n){h(t)}),s.up.on("touchend",function(n){v(t)}),s.down.on("touchstart",function(n){m(t)}),s.down.on("touchend",function(n){v(t)}),s.zoomin.on("touchstart",function(n){i(t)}),s.zoomin.on("touchend",function(n){v(t)}),s.zoomout.on("touchstart",function(n){r(t)}),s.zoomout.on("touchend",function(n){v(t)}),s.enableManual&&0<c("#wppa-pan-div-"+t+" canvas").length&&(c("#wppa-pan-div-"+t+" canvas")[0].addEventListener("touchstart",function(n){a(t,n)}),c("#wppa-pan-div-"+t+" canvas")[0].addEventListener("touchmove",function(n){o(t,n)}),c("#wppa-pan-div-"+t+" canvas")[0].addEventListener("touchend",function(n){p(t)})),s.right.on("mousedown",function(n){u(t)}),s.right.on("mouseup",function(n){v(t)}),s.left.on("mousedown",function(n){l(t)}),s.left.on("mouseup",function(n){v(t)}),s.up.on("mousedown",function(n){h(t)}),s.up.on("mouseup",function(n){v(t)}),s.down.on("mousedown",function(n){m(t)}),s.down.on("mouseup",function(n){v(t)}),s.zoomin.off("mousedown"),s.zoomin.on("mousedown",function(n){i(t)}),s.zoomin.off("mouseup"),s.zoomin.on("mouseup",function(n){v(t)}),s.zoomout.on("mousedown",function(n){r(t)}),s.zoomout.on("mouseup",function(n){v(t)}),s.enableManual&&0<c("#wppa-pan-div-"+t+" canvas").length&&(c("#wppa-pan-div-"+t+" canvas").on("mousedown",function(n){a(t,n)}),c("#wppa-pan-div-"+t+" canvas").on("mousemove",function(n){o(t,n)}),c("#wppa-pan-div-"+t+" canvas").on("mouseup",function(n){p(t)}),c("#wppa-pan-div-"+t+" canvas")[0].addEventListener("wheel",function(n){var e;e=t,(n=n).preventDefault(),n.stopPropagation(),s=f(e),f(e,{manCtrl:!1,butDown:!1,autorun:!1,dX:0,dFov:-n.deltaY*s.zoomsensitivity/(wppaIsChrome?60:6)}),w(e),setTimeout(function(){f(e,{dFov:0})},25)})),s.isLightbox&&(c("body").on("quitimage",function(n){var e;s=f(e=t,{abort:!0,autorun:!1}),clearTimeout(s.timer),clearInterval(s.intervalTimer),c("#wppa-pan-div-"+e+" canvas").hide(),c("#wppa-pctl-div-"+e).hide(),c("#wppa-overlay-pc").hide()}),c("#wppa-pctl-div-"+t).on("click",function(n){wppaKillEvent(n)})),f(t,s),c(window).on("wpparesizeend",function(n){e(t)}),wppaProtect(),c(document).on("tabbychange",function(n){var e;e=t,s.wppaRenderer.state.reset(),s=f(e,{initialized:!1,abort:!0}),setTimeout(function(){f(e,{abort:!1}),wppaDoSphericPan(e)},200)}),e(t),s.intervalTimer=setInterval(function(){e(t)},1e3)}function w(n){var e=f(n),t=wppaIsElementInViewport(c("#wppa-pan-div-"+n+" canvas"));if(e.manCtrl||!(b()<e.time+25)){if(!t)return!(b()<e.vtime+1e3)&&(setTimeout(function(){w(n)},1e3),void f(n,{vtime:b()}));f(n,{time:b()}),e.isLightbox&&(!wppaOvlOpen||wppaOvlActivePanorama!=e.id||wppaGlobalOvlPanoramaId>e.uId)&&(abort=!0),e.abort||((e.butDown||e.manCtrl)&&e.autorun&&(e.autorun=!1,e.dX=0),0==e.dX&&0==e.dY&&0==e.dFov&&(e.pause=!0),e.butDown&&(e.pause=!1),e.fov+=e.dFov,e.fov=Math.max(20,Math.min(120,e.fov)),e.wppaCamera=new THREE.PerspectiveCamera(e.fov,e.aspect,1,1e3),e.wppaCamera.target=new THREE.Vector3(0,0,0),e.lon+=e.dX,e.lat+=e.dY,e.lat=Math.max(-85,Math.min(85,e.lat)),e.wppaCamera.target.x=500*Math.sin(THREE.Math.degToRad(90-e.lat))*Math.cos(THREE.Math.degToRad(e.lon)),e.wppaCamera.target.y=500*Math.cos(THREE.Math.degToRad(90-e.lat)),e.wppaCamera.target.z=500*Math.sin(THREE.Math.degToRad(90-e.lat))*Math.sin(THREE.Math.degToRad(e.lon)),e.wppaCamera.lookAt(e.wppaCamera.target),e.wppaRenderer&&e.wppaRenderer.render(e.wppaScene,e.wppaCamera),wppaAdjustControlbar(),c("#wppa-ovl-spin").hide(),e.manCtrl,(e.autorun||!e.pause&&(e.manCtrl||e.butDown))&&e.wppaRenderer&&(e.timer=setTimeout(function(){w(n)},25)),f(n,e))}}function e(n){var e=!wppaIsFs();if(s=f(n)){if(s.isLightbox){if(!wppaOvlOpen)return;c("#wppa-overlay-pc").show(),c("#wppa-overlay-pc").css("width","");var t,a,o=(e=!wppaIsFs())?(a=window.innerWidth||screen.width,window.innerHeight||screen.height):(a=screen.width,screen.height),p=8,i=8+(s.controls?s.icsize+10:0)+30;e&&(p+=2*s.borderWidth,i+=2*s.borderWidth),t=(a-p)/2+i<o,i=e?t?(o-(u=(r=a-p)/2)-i)/2+20:(r=2*(u=o-i),20):(r=screen.width,u=screen.height,0),s.aspect=r/u,c("#wppa-ovl-sphericpan-container").css({top:i}),c("#wppa-overlay-pc").css({top:0}),e?(c("#wppa-ovl-sphericpan-container").css({backgroundColor:s.backgroundColor,padding:s.padding+"px",borderRadius:s.borderRadius+"px",width:r}),t?c("#wppa-overlay-pc").css({left:4}):c("#wppa-overlay-pc").css({left:(a-r)/2})):c("#wppa-ovl-sphericpan-container").css({backgroundColor:"transparent",padding:0,borderRadius:"0px",width:r,left:(a-r)/2}),s.wppaRenderer.setSize(r,u)}else{var r=c(s.div).parent().width(),u=parseInt(r/2);if(!s.wppaRenderer)return;s.wppaRenderer.setSize(r,u)}s.width=r,s.height=u,f(n,s),s.timer=setTimeout(function(){w(n)},250)}}function a(n,e){e.preventDefault(),e.stopPropagation(),s=f(n,{manCtrl:!0,butDown:!1,autorun:!1,dX:0}),e.touches?f(n,{sX:e.touches[0].clientX,sY:e.touches[0].clientY}):f(n,{sX:e.clientX,sY:e.clientY}),f(n,{sLon:s.lon,sLat:s.lat}),w(n)}function o(n,e){e.preventDefault(),e.stopPropagation(),(s=f(n)).manCtrl&&(e.touches?f(n,{lon:.1*(s.sX-e.touches[0].clientX)+s.sLon,lat:.1*(e.touches[0].clientY-s.sY)+s.sLat,pause:!1}):f(n,{lon:.1*(s.sX-e.clientX)+s.sLon,lat:.1*(e.clientY-s.sY)+s.sLat,pause:!1}),w(n))}function p(n){f(n,{manCtrl:!1})}function i(n){s=f(n),f(n,{dFov:-.4*s.mFakt,butDown:!0}),w(n)}function r(n){s=f(n),f(n,{dFov:.4*s.mFakt,butDown:!0}),w(n)}function u(n){s=f(n),f(n,{dX:.2*s.mFakt,butDown:!0}),w(n)}function l(n){s=f(n),f(n,{dX:-.2*s.mFakt,butDown:!0}),w(n)}function h(n){s=f(n),f(n,{dY:.2*s.mFakt,butDown:!0}),w(n)}function m(n){s=f(n),f(n,{dY:-.2*s.mFakt,butDown:!0}),w(n)}function v(n){s=f(n),f(n,{dX:0,dY:0,dFov:0,butDown:!1})}function f(n,e){if(!wppaSphericData[n])return!1;if(e)for(var t in e)wppaSphericData[n][t]=e[t];return wppaSphericData[n]}function b(){return d=new Date,d.getTime()}}