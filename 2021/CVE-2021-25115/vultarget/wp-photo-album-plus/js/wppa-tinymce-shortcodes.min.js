function wppaGalleryEvaluate(){var e;jQuery("#wppagallery-galery-type-tr").hide(),jQuery("#wppagallery-slides-type-tr").hide(),jQuery("#wppagallery-single-type-tr").hide(),jQuery("#wppagallery-search-type-tr").hide(),jQuery("#wppagallery-miscel-type-tr").hide(),jQuery("#wppagallery-album-type-tr").hide(),jQuery("#wppagallery-album-real-tr").hide(),jQuery("#wppagallery-album-real-search-tr").hide(),jQuery("#wppagallery-album-realopt-tr").hide(),jQuery("#wppagallery-album-virt-tr").hide(),jQuery("#wppagallery-album-virt-cover-tr").hide(),jQuery("#wppagallery-owner-tr").hide(),jQuery("#wppagallery-owner-parent-tr").hide(),jQuery("#wppagallery-album-parent-tr").hide(),jQuery("#wppagallery-album-count-tr").hide(),jQuery("#wppagallery-photo-count-tr").hide(),jQuery("#wppagallery-albumcat-tr").hide(),jQuery("#wppagallery-photo-tr").hide(),jQuery("#wppagallery-photo-preview-tr").hide(),jQuery("#wppagallery-phototags-tr").hide(),jQuery("#wppagallery-search-tr").hide(),jQuery("#wppagallery-taglist-tr").hide(),jQuery("#wppagallery-album-super-tr").hide(),jQuery("#wppagallery-calendar-tr").hide(),jQuery("#wppagallery-tags-cats-tr").hide(),jQuery("#wppagallery-landing-tr").hide(),jQuery("#wppagallery-rootalbum-tr").hide(),jQuery("#wppagallery-admins-tr").hide(),jQuery("#wppagallery-cache-tr").hide(),jQuery("#wppagallery-delay-tr").hide();var a,r,l,p="[wppa",t="",y="",o="",u="",s="",w="",c="",g="",i="",n="",h="",d=!1,j=!1,Q=!1,m=!1,b=!1,v=!1,k=!1,x=!1,f=!1,E=!1,I="",S="",T="",P="",z="",C=!1,N=!1,B="",G="0",A="0",D="",M="";switch(jQuery("select").css("color","#700"),jQuery("#wppagallery-album-parent-parent").css("color","#070"),jQuery("#wppagallery-align").css("color","#070"),a=jQuery("#wppagallery-top-type").val(),wppaIsEmpty(a)||jQuery("#wppagallery-top-type").css("color","#070"),a){case"galerytype":jQuery("#wppagallery-galery-type-tr").show(),t=jQuery("#wppagallery-galery-type").val(),Q=d=!0,jQuery("#wppagallery-album-type-tr").show(),wppaIsEmpty(t)||(jQuery("#wppagallery-galery-type").css("color","#070"),y=t);break;case"slidestype":jQuery("#wppagallery-slides-type-tr").show(),t=jQuery("#wppagallery-slides-type").val(),Q=j=!0,jQuery("#wppagallery-album-type-tr").show(),wppaIsEmpty(t)||(jQuery("#wppagallery-slides-type").css("color","#070"),o=t);break;case"singletype":jQuery("#wppagallery-single-type-tr").show(),t=jQuery("#wppagallery-single-type").val(),m=!0,jQuery("#wppagallery-photo-tr").show(),wppaIsEmpty(t)||jQuery("#wppagallery-single-type").css("color","#070");break;case"searchtype":switch(jQuery("#wppagallery-search-type-tr").show(),f=!0,s=t=jQuery("#wppagallery-search-type").val(),wppaIsEmpty(t)||jQuery("#wppagallery-search-type").css("color","#070"),t){case"search":jQuery("#wppagallery-search-tr").show(),jQuery("#wppagallery-root").prop("checked")&&jQuery("#wppagallery-rootalbum-tr").show(),A=jQuery("#wppagallery-rootalbum").val(),jQuery("#wppagallery-landing-tr").show(),G=jQuery("#wppagallery-landing").val();break;case"supersearch":break;case"tagcloud":case"multitag":if(jQuery("#wppagallery-taglist-tr").show(),!jQuery("#wppagallery-alltags").prop("checked")){k=!0,jQuery("#wppagallery-seltags").show(),r=jQuery(".wppagallery-taglist-tags");for(var R=[],H=W=0;W<r.length;)r[W].selected&&(R[H]=r[W].value,H++),W++;I=wppaArrayToEnum(R,",")}break;case"superview":jQuery("#wppagallery-album-super-tr").show(),c=jQuery("#wppagallery-album-super-parent").val();break;case"calendar":jQuery("#wppagallery-calendar-tr").show(),jQuery("#wppagallery-album-super-tr").show(),z=jQuery("#wppagallery-calendar-type").val(),C=jQuery("#wppagallery-calendar-reverse").prop("checked"),N=jQuery("#wppagallery-calendar-allopen").prop("checked"),g=jQuery("#wppagallery-album-super-parent").val()}break;case"misceltype":switch(jQuery("#wppagallery-miscel-type-tr").show(),t=jQuery("#wppagallery-miscel-type").val(),E=!0,wppaIsEmpty(t)||jQuery("#wppagallery-miscel-type").css("color","#070"),t){case"generic":w=t;break;case"upload":w=t,jQuery("#wppagallery-album-realopt-tr").show(),c=(c=jQuery("#wppagallery-album-realopt").val()).toString().replace(/,/g,".");break;case"landing":case"stereo":w=t;break;case"choice":w=t,jQuery("#wppagallery-admins-tr").show(),D=wppaGetSelectionEnumByClass(".wppagallery-admin",",")}}if(wppaIsEmpty(t)||(p+=' type="'+t+'"'),Q)switch(u=jQuery("#wppagallery-album-type").val(),wppaIsEmpty(u)||jQuery("#wppagallery-album-type").css("color","#070"),u){case"real":if(jQuery("#wppagallery-album-real-tr").show(),jQuery("#wppagallery-album-real-search-tr").show(),jQuery("#wppagallery-album-real-search"))if(jQuery("#wppagallery-album-real-search").val()){var L=jQuery("#wppagallery-album-real-search").val().toLowerCase();if(!wppaIsEmpty(L)&&(albums=jQuery(".wppagallery-album-r"),0<albums.length))for(var W=0;W<albums.length;)-1==albums[W].innerHTML.toLowerCase().search(L)?(jQuery(albums[W]).removeAttr("selected"),jQuery(albums[W]).hide()):jQuery(albums[W]).show(),W++}else jQuery(".wppagallery-album-r").show();c=(c=jQuery("#wppagallery-album-real").val()).toString().replace(/,/g,".");break;case"virtual":if(c="cover"==t?(jQuery("#wppagallery-album-virt-cover-tr").show(),jQuery("#wppagallery-album-virt-cover").val()):(jQuery("#wppagallery-album-virt-tr").show(),jQuery("#wppagallery-album-virt").val()),!wppaIsEmpty(c))switch(jQuery("#wppagallery-album-virt").css("color","#070"),c){case"#topten":case"#lasten":case"#featen":case"#comten":jQuery("#wppagallery-album-realopt-tr").show(),0<jQuery(".wppagallery-album-ropt").length?g=wppaGetSelectionEnumByClass(".wppagallery-album-ropt","."):-1!=(g=jQuery("#wppagallery-album-realopt").val()).indexOf(",")&&(parr=g.split(","),g=wppaArrayToEnum(parr,".")),""==g&&(g="0"),jQuery("#wppagallery-photo-count-tr").show(),i=jQuery("#wppagallery-photo-count").val();break;case"#tags":jQuery("#wppagallery-phototags-tr").show(),jQuery("#wppagallery-tags-cats-tr").show(),jQuery("[name=andor]:checked").val()||jQuery("#wppagallery-or").prop("checked",!0),B="or"==jQuery("[name=andor]:checked").val()?";":",",v=!0,r=jQuery(".wppagallery-phototags");R=[];for(H=W=0;W<r.length;)r[W].selected&&(R[H]=r[W].value,H++),W++;T=wppaArrayToEnum(R,B);break;case"#last":jQuery("#wppagallery-album-parent-tr").show(),g=jQuery("#wppagallery-album-parent-parent").val(),jQuery("#wppagallery-album-count-tr").show(),i=jQuery("#wppagallery-album-count").val();break;case"#cat":jQuery("#wppagallery-albumcat-tr").show(),jQuery("#wppagallery-tags-cats-tr").show(),jQuery("[name=andor]:checked").val()||jQuery("#wppagallery-or").prop("checked",!0),B="or"==jQuery("[name=andor]:checked").val()?";":",",x=!0,r=jQuery(".wppagallery-albumcat");var q=[];for(H=W=0;W<r.length;)r[W].selected&&(q[H]=r[W].value,H++),W++;P=wppaArrayToEnum(q,B);break;case"#owner":case"#upldr":jQuery("#wppagallery-owner-tr").show(),b=!0,S=jQuery("#wppagallery-owner").val(),wppaIsEmpty(S)||(jQuery("#wppagallery-owner").css("color","#070"),jQuery("#wppagallery-owner-parent-tr").show(),g=(g=wppaGetSelectionEnumByClass(".wppagallery-album-p",".")).toString().replace("zero","0"));break;case"#all":break;default:null!=c&&alert(wppaUIERR+": "+c)}break;default:c=""}wppaIsEmpty(c)||(p+=' album="'+c,""!=S&&(p+=","+S),""==g&&""!=i&&(g="0"),""!=g&&(p+=","+g),""!=i&&(p+=","+i),""!=T&&(p+=","+T),""!=P&&(p+=","+P),p+='"'),m&&(n=jQuery("#wppagallery-photo").val())&&(h=(h=(h=n.replace(/\//g,"")).split("."))[0],jQuery("#wppagallery-photo-preview-tr").show(),wppaTinyMcePhotoPreview(n),p+=' photo="'+h+'"',jQuery("#wppagallery-photo").css("color","#070")),"search"==t&&(jQuery("#wppagallery-sub").prop("checked")&&(p+=' sub="1"'),jQuery("#wppagallery-root").prop("checked")&&(p+="0"!=A?' root="#'+A+'"':' root="1"'),"0"!=G&&(p+=' landing="'+G+'"')),"tagcloud"!=t&&"multitag"!=t||""!=I&&(p+=' taglist="'+I+'"'),"calendar"==t&&(p+=' calendar="'+z+'"',g&&(p+=' album="'+g+'"'),C&&(p+=' reverse="1"'),N&&(p+=' all="1"')),"choice"==t&&0<D.length&&(p+=' admin="'+D+'"');u=document.getElementById("wppagallery-size").value,h=u.split(",");h[1]?"auto"==h[0]&&parseInt(h[1])==h[1]&&100<h[1]?jQuery("#wppagallery-size").css("color","#070"):(u=0,jQuery("#wppagallery-size").css("color","#700")):(""!=u&&"auto"!=u&&parseInt(u)!=u&&(u=0,jQuery("#wppagallery-size").css("color","#700")),u<0&&(u=-u),u<100&&(u/=100),jQuery("#wppagallery-size").css("color","#070")),0!=u&&(p+=' size="'+u+'"'),"none"!=(l=jQuery("#wppagallery-align").val())&&(p+=' align="'+l+'"'),"landing"!=w&&(jQuery("#wppagallery-cache-tr").show(),jQuery("#wppagallery-cache").prop("checked")&&(p+=' cache="inf"')),"landing"!=w&&"singletype"!=a&&(jQuery("#wppagallery-delay-tr").show(),jQuery("#wppagallery-delay").prop("checked")&&(p+=' delay="yes"')),M='<input type="text" id="wppagallery-shortcode-preview" style="background-color:#ddd; width:100%; height:26px;" value="'+(p=(p+="]").replace(/"/g,"&quot;"))+'" />',jQuery("#wppagallery-shortcode-preview-container").html(M),(e=!(""==c&&Q||""==n&&m||""==S&&b||""==I&&k||""==y&&d||""==o&&j||""==s&&f||""==w&&E||""==T&&v||""==P&&x))||((M="")==c&&Q&&(M+="Need album\n"),""==n&&m&&(M+="Need photo\n"),""==S&&b&&(M+="Need owner"),""==I&&k&&(M+="Need taglist"),""==y&&d&&(M+="Need galType"),""==o&&j&&(M+="Need slideType"),""==s&&f&&(M+="Need searchType"),""==w&&E&&(M+="Need miscType"),""==T&&v&&(M+="Need tags"),""==P&&x&&(M+="Need cats")),e?(jQuery("#wppagallery-submit").show(),jQuery("#wppagallery-submit-notok").hide()):(jQuery("#wppagallery-submit").hide(),jQuery("#wppagallery-submit-notok").show())}function wppaTinyMcePhotoPreview(e){var a;"#potd"==e?jQuery("#wppagallery-photo-preview").html(wppaNoPreview):-1!=e.indexOf("xxx")?(a=e.replace("xxx",""),jQuery("#wppagallery-photo-preview").html('<video preload="metadata" style="max-width:400px; max-height:300px; margin-top:3px;" controls><source src="'+wppaPhotoDirectory+a+'mp4" type="video/mp4"><source src="'+wppaPhotoDirectory+a+'ogg" type="video/ogg"><source src="'+wppaPhotoDirectory+a+'ogv" type="video/ogg"><source src="'+wppaPhotoDirectory+a+'webm" type="video/webm"></video>')):jQuery("#wppagallery-photo-preview").html('<img src="'+wppaPhotoDirectory+e+'" style="max-width:400px; max-height:300px;" />')}tinymce.PluginManager.add("wppagallery",function(e,a){e.addButton("wppa_gallery_button",{image:wppaImageDirectory+"albumnew32.png",tooltip:"WPPA+ Shortcode Generator",onclick:function(){var e={modal:!0,resizable:!0,width:720,show:{effect:"fadeIn",duration:400},closeText:"",close:function(e,a){},open:function(e,a){wppaGalleryEvaluate()}};jQuery("#wppagallery-form").dialog(e).dialog("open"),jQuery(".ui-widget-header").css({background:"none"}),jQuery(".ui-dialog").css({boxShadow:"0px 0px 5px 5px #aaaaaa",borderRadius:wppaBoxRadius+"px",padding:"8px",backgroundColor:wppaModalBgColor,boxSizing:"content-box",zIndex:200200}),jQuery(".ui-dialog-titlebar").css({lineHeight:"0px",height:"24px",fontSize:"18px",fontWeight:"bold"}),jQuery(".ui-dialog-title").css({position:"absolute",top:"15px",fontSize:"18px",fontWeight:"bold"}),jQuery(".ui-button").css({backgroundImage:wppaModalQuitImg,padding:0,position:"absolute",right:"8px",top:"20px",width:"16px",height:"16px"}),jQuery(".ui-widget-overlay").css({background:"none"}),jQuery(".ui-button").attr("title","Close"),jQuery(".ui-icon-closethick").css({display:"none"})}})}),jQuery(function(){var a=wppaGetXmlHttp(),e=wppaAjaxUrl+"?action=wppa&wppa-action=tinymcedialog";a.open("GET",e,!0),a.send(),a.onreadystatechange=function(){var e;4==a.readyState&&404!=a.status&&(e=wppaEntityDecode(a.responseText),(e=jQuery(e)).find("table"),e.appendTo("body").hide(),e.find("#wppagallery-submit").click(function(){newShortcode=document.getElementById("wppagallery-shortcode-preview").value,newShortcode=newShortcode.replace(/&quot;/g,'"'),tinyMCE.activeEditor.execCommand("mceInsertContent",0,newShortcode),jQuery("#wppagallery-form").dialog("close")}))}});